<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>관리자 상점목록</title>
    <link rel="stylesheet" type="text/css" href="css/list.css">
</head>
<!--
    날짜 : 2025/09/30
    이름 : 조지영
    내용 : 관리자 상점 목록 (Thymeleaf 연동)
-->
<body>
<th:block th:replace="~{/admin/common/header :: header}"></th:block>

<!-- 페이지 타이틀 -->
<div class="page-title">
    <h2>상점목록</h2>
    <div class="breadcrumb">HOME &gt; 상점관리 &gt; <strong>상점목록</strong></div>
</div>

<!-- 검색창 + 운영 상태 -->
<form method="get" th:action="@{/admin/shop/list}">
    <div class="search-area" th:with="st=${param.searchType != null ? param.searchType[0] : ''}">
        <div class="search-box">
            <select name="searchType" id="searchType">
                <option value="" th:selected="${st == ''}">전체</option>
                <option value="company" th:selected="${st == 'company'}">상호명</option>
                <option value="representative" th:selected="${st == 'representative'}">대표</option>
                <option value="tin" th:selected="${st == 'tin'}">사업자등록번호</option>
                <option value="tel" th:selected="${st == 'tel'}">연락처</option>
            </select>
            <input type="text" id="keyword" name="keyword"
                   th:value="${param.keyword != null ? param.keyword[0] : ''}"
                   placeholder="검색어 입력"/>
            <button type="submit" class="btn">검색</button>
        </div>

        <!-- 운영 상태 설명 -->
        <div class="status-info">
            <span class="dot green"></span> 운영 중&nbsp;&nbsp;
            <span class="dot red"></span> 운영 중지&nbsp;&nbsp;
            <span class="dot blue"></span> 운영 준비
        </div>
    </div>
</form>

<!-- 상점 목록 -->
<form id="shopBulkForm" th:action="@{/admin/shop/deleteSelected}" method="post">

    <table>
        <thead>
        <tr>
            <th><input type="checkbox" id="shopCheckAll"></th>
            <th>번호</th>
            <th>상호명</th>
            <th>대표</th>
            <th>사업자등록번호</th>
            <th>통신판매업번호</th>
            <th>연락처</th>
            <th>운영</th>
            <th>관리</th>
        </tr>
        </thead>

        <tbody>
        <!--- (1)  -->
        <tr>
            <td><input type="checkbox"></td>
            <td>5</td>
            <td>(주)다나와</td>
            <td>정우성</td>
            <td>112-12-12345</td>
            <td>2024-서울강남-04433</td>
            <td>010-1234-1001</td>
            <td><span class="dot green"></span></td>
            <td>[중단]</td>
        </tr>
        <!--- (1) 배너끝 -->

        <!--- (2)  -->
        <tr>
            <td><input type="checkbox"></td>
            <td>4</td>
            <td>(주)멋남</td>
            <td>이정재</td>
            <td>112-12-12344</td>
            <td>2024-서울강남-04438</td>
            <td>010-1234-1002</td>
            <td><span class="dot green"></span></td>
            <td>[중단]</td>
        </tr>
        <!--- (2) 배너끝 -->

        <!--- (3)  -->
        <tr>
            <td><input type="checkbox"></td>
            <td>3</td>
            <td>(주)컴퓨존</td>
            <td>장동건</td>
            <td>112-12-12343</td>
            <td>2024-서울강남-04429</td>
            <td>010-1234-1003</td>
            <td><span class="dot green"></span></td>
            <td>[중단]</td>
        </tr>
        <!--- (3) 배너끝 -->

        <!--- (4)  -->
        <tr>
            <td><input type="checkbox"></td>
            <td>2</td>
            <td>누리푸드</td>
            <td>조인성</td>
            <td>112-12-12342</td>
            <td>2024-부산진구-01139</td>
            <td>010-1234-1004</td>
            <td><span class="dot red"></span></td>
            <td>[재개]</td>
        </tr>
        <!--- (4) 배너끝 -->

        <!--- (5)  -->
        <tr>
            <td><input type="checkbox"></td>
            <td>5</td>
            <td>굿바디스포츠</td>
            <td>강동원</td>
            <td>112-12-12341</td>
            <td>2024-서울강남-04425</td>
            <td>010-1234-1005</td>
            <td><span class="dot blue"></span></td>
            <td>[승인]</td>
        </tr>
        <!--- (5) 배너끝 -->


        </tbody>
    </table>

    <!-- 버튼 -->
    <div class="btn-wrap">
        <button type="submit" id="shopBulkDeleteBtn" class="btn">선택 삭제</button>
        <a href="#" id="openRegister" class="btn">상점등록</a>
    </div>
</form>

<!-- 페이징 -->


</div>
</div>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const checkAll = document.getElementById("shopCheckAll");
        const checks = document.querySelectorAll(".shopRowCheck");
        const delBtn = document.getElementById("shopBulkDeleteBtn");

        checkAll?.addEventListener("change", () => {
            checks.forEach(ch => ch.checked = checkAll.checked);
        });
        checks.forEach(ch => ch.addEventListener("change", () => {
            const all = checks.length;
            const on = [...checks].filter(c => c.checked).length;
            checkAll.checked = (all === on);
            checkAll.indeterminate = (on > 0 && on < all);
        }));
        delBtn?.addEventListener("click", (e) => {
            const hasSelected = [...checks].some(c => c.checked);
            if (!hasSelected) {
                e.preventDefault();
                alert("삭제할 상점을 선택하세요.");
                return;
            }
            if (!confirm("선택한 상점을 삭제하시겠습니까?")) e.preventDefault();
        });

        // 모달
        const modal = document.getElementById('registerModal');
        const btnOpen = document.getElementById('openRegister');
        const btnClose = modal.querySelector('.modal-close');
        const backdrop = modal.querySelector('.modal-backdrop');
        btnOpen?.addEventListener('click', e => {
            e.preventDefault();
            modal.style.display = 'block';
        });
        btnClose?.addEventListener('click', () => modal.style.display = 'none');
        backdrop?.addEventListener('click', () => modal.style.display = 'none');
    });
</script>
<script>
    document.getElementById("openRegister").addEventListener("click", function (e) {
        e.preventDefault(); // a 태그의 기본 이동 막기
        window.open(
            "register.html",     // 열 페이지
            "registerPopup",     // 팝업 이름
            "width=800,height=600,scrollbars=yes,resizable=yes" // 옵션
        );
    });
</script>
</body>
</html>